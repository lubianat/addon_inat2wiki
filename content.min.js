'use strict';let buttonAdded=!1;function checkLicenseAndAddButton(b,c){fetch(`https://api.inaturalist.org/v1/observations/${b}`).then(a=>a.json()).then(a=>{a=["cc-by","cc-by-sa","cc0"].includes(a.results[0].license_code);addButton(c,a)}).catch(a=>console.error("Error fetching observation data:",a))}
function addButton(b,c){if(!buttonAdded){var a=document.createElement("button");a.style.marginLeft="10px";a.style.backgroundColor=c?"blue":"grey";a.style.color="white";a.style.border="none";a.style.padding="5px 10px";a.style.borderRadius="5px";a.style.cursor="pointer";c?(a.innerText="Add it to Wikimedia Commons!",a.onclick=function(){const d=window.location.pathname.split("/").pop();window.open(`https://inat2wiki.toolforge.org/parse/${d}`,"_blank")}):(a.innerText="Cannot upload to Commons, incompatible license.",
a.disabled=!0);b.appendChild(a);buttonAdded=!0}}function observeDOMChanges(){const b=new MutationObserver(c=>{c.forEach(a=>{if(!buttonAdded&&a.addedNodes.length&&(a=document.querySelector(".ObservationTitle"))){const d=window.location.pathname.split("/").pop();checkLicenseAndAddButton(d,a);b.disconnect()}})});b.observe(document.body,{childList:!0,subtree:!0})}observeDOMChanges();